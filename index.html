<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sprout's Website</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="favicion.ico" type="image/x-icon" sizes="256x256">
    <script type="importmap">
        {
          "imports": {
            "@material/web/": "https://esm.run/@material/web/"
          }
        }
    </script>
    <script type="module">
        import '@material/web/all.js';
        import {styles as typescaleStyles} from '@material/web/typography/md-typescale-styles.js';
    
        document.adoptedStyleSheets.push(typescaleStyles.styleSheet);
    </script>
</head>
<body>
    <!-- 网站内容 -->
    <div class="typing typing-tittle-small">Welcome to</div>
    <div class="typing typing-tittle-large">Sprout's</div>
    <div class="typing typing-tittle-small">personal website</div>
    <div class="typing typing-body-mid">··································</div>
    <div class="typing typing-body-mid" data-printonebyone="true" data-iinterval="25">Here's a place to share my thoughts and ideas with the world.</div>
    <div class="typing typing-body-mid" data-printonebyone="true" data-iinterval="25">Do you know why this website is called 'sprotistuffy'?</div>
    <div class="typing typing-body-mid" data-printonebyone="true" data-iinterval="25">Because my previous name was Luffy, but now my name is Sprout</div>

    <!-- 添加MD3按钮 -->
    <div style="text-align: center; margin-top: 50px;">
        <md-filled-button label="Green Button" style="--mdc-theme-primary: var(--md-sys-color-primary);">Button</md-filled-button>
    </div>

    <script>
        /**
         * 为指定元素添加打字效果
         * @param {HTMLElement} element - 需要添加打字效果的元素
         * @returns {Promise} - 返回一个Promise，在打字效果完成时解决
         */
        function typeText(element) {
            return new Promise((resolve) => {
                const text = element.textContent;
                const printonebyone = element.dataset.printonebyone === 'true';
                const iInterval = parseInt(element.dataset.iinterval) || 100;

                if (!printonebyone) {
                    resolve();
                    return;
                }

                element.textContent = '';
                element.style.visibility = 'visible';
                let index = 0;

                function addLetter() {
                    if (index >= text.length) {
                        resolve();
                        return;
                    }

                    const span = document.createElement('span');
                    span.textContent = text[index];
                    span.className = 'fade-in';
                    element.appendChild(span);
                    setTimeout(() => span.style.opacity = '1', iInterval);
                    index++;
                    setTimeout(addLetter, iInterval);
                }

                addLetter();
            });
        }

        /**
         * 为所有具有.typing类的元素添加打字效果
         */
        async function typeAllText() {
            const typingElements = document.querySelectorAll('.typing'); // 获取所有.typing元素
            for (const element of typingElements) {
                await typeText(element); // 为每个元素添加打字效果，并等待完成
            }
        }

        // 当DOM内容加载完成后，开始执行打字效果
        document.addEventListener('DOMContentLoaded', typeAllText);
    </script>
</body>
</html>
