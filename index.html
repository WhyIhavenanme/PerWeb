<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sprout's Website</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="favicion.ico" type="image/x-icon" sizes="256x256">
    <script type="importmap">
        {
          "imports": {
            "@material/web/": "https://esm.run/@material/web/"
          } 
        }
    </script>
    <script type="module">
        import '@material/web/all.js';
        import {styles as typescaleStyles} from '@material/web/typography/md-typescale-styles.js';
    
        document.adoptedStyleSheets.push(typescaleStyles.styleSheet);
    </script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
</head>
<body>
    <!-- ç½‘ç«™å†…å®¹ -->
    <div class="typing typing-tittle-small">Welcome to</div>
    <div class="typing typing-tittle-large">Sprout's</div>
    <div class="typing typing-tittle-small">personal website</div>
    <div class="typing typing-body-mid">Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·</div>
    <div class="typing typing-body-mid" data-printonebyone="true" data-iinterval="15">Here's a place to share my thoughts and ideas with the world.</div>
    <div class="typing typing-body-mid" data-printonebyone="true" data-iinterval="15">Do you know why this website is called 'sprotistuffy'?</div>
    <div class="typing typing-body-mid" data-printonebyone="true" data-iinterval="15">Because my previous name was Luffy, but now my name is Sprout.</div>

    <br>
    <img src="https://count.getloli.com/@welcome-img?name=welcome-img&theme=rule34&padding=7&offset=0&align=top&scale=1&pixelated=1&darkmode=auto"/>

    <!-- æ·»åŠ MD3æŒ‰é’® -->
    <div style="text-align: center; margin-top: 50px;">
        <p class="sp-body">Hi,January 21st is my birthday.</p>
        <p class="sp-body">Click the button below to celebrate with me.ğŸ¥°</p>
        <md-outlined-button type="reset" id="fireworks-button">âœ¨CelebrateğŸ‰</md-outlined-button>
    </div>

    <!---- æ·»åŠ MD3åˆ—è¡¨ ---->
    <md-list style="max-width: 350px; border-radius: 16px;" id="theme-toggle">
        <md-list-item
            type="link"
            href="https://github.com/WhyIhavenanme">
            <div slot="headline">Visit my Github</div>
            <div slot="supporting-text">This will link you to my Github Space in a new tab</div>
            <md-icon slot="end">
                <img id="github-icon" alt="GitHub">
            </md-icon>
        </md-list-item>
    </md-list>

    <!-- æ·»åŠ åˆ‡æ¢ä¸»é¢˜æŒ‰é’® -->
    <label for="switch" style="display: flex; align-items: center; gap: 10px;">
        <div class="sp-body">Dark mode?</div>
        <md-switch id="theme-toggle-button"></md-switch>    
    </label>
    
    <!--åˆ‡æ¢ä¸»é¢˜-->
    <script>
        // å½“DOMå†…å®¹åŠ è½½å®Œæˆåï¼Œå¼€å§‹æ‰§è¡Œè„šæœ¬
        document.addEventListener('DOMContentLoaded', () => {
            // è·å–å…ƒç´ 
            const themeToggleButton = document.getElementById('theme-toggle-button');
            const githubIcon = document.getElementById('github-icon');

            // æ£€æµ‹ç³»ç»Ÿé¢œè‰²æ¨¡å¼å¹¶åº”ç”¨ç›¸åº”çš„ä¸»é¢˜
            function applyTheme() {
                const isDarkMode = window.matchMedia('(prefers-color-scheme: light)').matches;
                if (isDarkMode) {
                    document.documentElement.classList.add('dark-theme');
                    document.documentElement.classList.remove('light-theme');
                    githubIcon.src = 'icons/github-mark-white.png'; // è®¾ç½®ä¸ºç™½è‰²å›¾æ ‡
                } else {
                    document.documentElement.classList.add('light-theme');
                    document.documentElement.classList.remove('dark-theme');
                    githubIcon.src = 'icons/github-mark.png'; // è®¾ç½®ä¸ºé»˜è®¤å›¾æ ‡
                }
            }

            // åˆå§‹åº”ç”¨ä¸»é¢˜
            applyTheme();

            // ç›‘å¬ç³»ç»Ÿé¢œè‰²æ¨¡å¼å˜åŒ–
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', applyTheme);

            // åˆ‡æ¢å›¾æ ‡
            function updateIcon() {
                if (document.documentElement.classList.contains('dark-theme')) {
                    githubIcon.src = 'icons/github-mark-white.png';
                } else {
                    githubIcon.src = 'icons/github-mark.png';
                }
            }

            // åˆå§‹è®¾ç½®å›¾æ ‡
            updateIcon();

            // ç›‘å¬ä¸»é¢˜åˆ‡æ¢æŒ‰é’®çš„å˜åŒ–
            themeToggleButton.addEventListener('click', () => {
                if (document.documentElement.classList.contains('dark-theme')) {
                    document.documentElement.classList.remove('dark-theme');
                    document.documentElement.classList.add('light-theme');
                } else {
                    document.documentElement.classList.remove('light-theme');
                    document.documentElement.classList.add('dark-theme');
                }
                updateIcon();
            });
        });
    </script>

    <script>
        // å½“DOMå†…å®¹åŠ è½½å®Œæˆåï¼Œå¼€å§‹æ‰§è¡Œè„šæœ¬
        document.addEventListener('DOMContentLoaded', () => {
            // è·å–å…ƒç´ 
            const fireworksButton = document.getElementById('fireworks-button');

            // ç›‘å¬æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            fireworksButton.addEventListener('click', () => {
                // åˆ›å»ºä¸€ä¸ªçƒŸèŠ±æ•ˆæœ
                const duration = 1 * 1000;
                const animationEnd = Date.now() + duration;
                const defaults = { startVelocity: 15, spread: 360, ticks: 120, zIndex: 0 };

                function randomInRange(min, max) {
                    return Math.random() * (max - min) + min;
                }

                const interval = setInterval(() => {
                    const timeLeft = animationEnd - Date.now();

                    if (timeLeft <= 0) {
                        return clearInterval(interval);
                    }

                    const particleCount = 50 * (timeLeft / duration);
                    // since particles fall down, start a bit higher than random
                    confetti({
                        ...defaults,
                        particleCount,
                        origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 }
                    });
                    confetti({
                        ...defaults,
                        particleCount,
                        origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 }
                    });
                }, 150);
            });
        });
    </script>
    
    <script>
        /**
         * ä¸ºæŒ‡å®šå…ƒç´ æ·»åŠ æ‰“å­—æ•ˆæœ
         * @param {HTMLElement} element - éœ€è¦æ·»åŠ æ‰“å­—æ•ˆæœçš„å…ƒç´ 
         * @returns {Promise} - è¿”å›ä¸€ä¸ªPromiseï¼Œåœ¨æ‰“å­—æ•ˆæœå®Œæˆæ—¶è§£å†³
         */
        function typeText(element) {
            return new Promise((resolve) => {
                const text = element.textContent;
                const printonebyone = element.dataset.printonebyone === 'true';
                const iInterval = parseInt(element.dataset.iinterval) || 100;

                if (!printonebyone) {
                    resolve();
                    return;
                }

                element.textContent = '';
                element.style.visibility = 'visible';
                let index = 0;

                function addLetter() {
                    if (index >= text.length) {
                        resolve();
                        return;
                    }

                    const span = document.createElement('span');
                    span.textContent = text[index];
                    span.className = 'fade-in';
                    element.appendChild(span);
                    setTimeout(() => span.style.opacity = '1', iInterval);
                    index++;
                    setTimeout(addLetter, iInterval);
                }

                addLetter();
            });
        }

        /**
         * ä¸ºæ‰€æœ‰å…·æœ‰.typingç±»çš„å…ƒç´ æ·»åŠ æ‰“å­—æ•ˆæœ
         */
        async function typeAllText() {
            const typingElements = document.querySelectorAll('.typing'); // è·å–æ‰€æœ‰.typingå…ƒç´ 
            for (const element of typingElements) {
                await typeText(element); // ä¸ºæ¯ä¸ªå…ƒç´ æ·»åŠ æ‰“å­—æ•ˆæœï¼Œå¹¶ç­‰å¾…å®Œæˆ
            }
        }

        // å½“DOMå†…å®¹åŠ è½½å®Œæˆåï¼Œå¼€å§‹æ‰§è¡Œæ‰“å­—æ•ˆæœ
        document.addEventListener('DOMContentLoaded', typeAllText);
    </script>
</body>
</html>
